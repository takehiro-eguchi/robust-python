# 3. 型アノテーション

## 3.1. 型アノテーションとは何か？

Pythonは動的型付け言語であるため、変数の方は実行時までわからない。
これがプログラムの堅牢性を大きく下げる原因になっているが、これに対する対策がこの`型アノテーション`である。
`型アノテーション`は実行時にPythonが型チェックをしてくれるものではないが、開発者や開発環境に大きなヒントを与えることができ、意図しない利用を防いでくれる効果が期待できる

```python
# 引数と戻り値に型アノテーションを利用
def find_workers_available_for_time(open_time: datetime.datetime) -> list[str]:
    ...
```

## 3.2. 型アノテーションの利点

1. IDEが自動補完をしてくれる
2. mypyなど利用することにより、型チェッカを行うことが可能となる

```ps1
pip install mypy
mypy [対象ファイル or 対象ディレクトリ]
```

`AppData\Local\Packages\PythonSoftwareFoundation.Python.3.12_qbz5n2kfra8p0\LocalCache\local-packages\Python312\Scripts`に`Path`を設定するのを忘れずに。
なんと`str`の戻り値にて`None`を返していても検出してくれる。

**今まで型チェッカがあれば、検出できたエラーがあるかどうかを議論してみよう**
→ 実はない。さほど大規模な開発をPythonでしたことがなく、ユニットテストも作成するので、事前に検出できる。ただ、今までは型チェックでやってくれることもコードレビューで指摘する必要があったことを考慮すると、便利にはなるかもしれない。

## 3.3. いつ型アノテーションをつかうべきか

* 他のモジュールや利用者が呼び出す関数
* 型が複雑な場合やわかりにくい場合
* mypyがデータ型を指定するように指示する場所

まあ、要は

* パブリックな関数には付ける
* プライベートな関数やローカル変数にはわざわざ付けない
* mypyの警告には従う

といった感じでしょうか。

## 3.4. まとめ

型ヒントやヒントでしかないため、強制力はないが、型チェッカにより自信を持たせてくれるってさ。
